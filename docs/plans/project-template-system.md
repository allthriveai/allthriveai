# Project Portfolio Template System

## Problem Statement

Currently, project pages are generated by parsing README markdown into free-form blocks. This results in:
- **Inconsistent layouts** - Every project looks different
- **AI slop appearance** - Walls of text without visual structure
- **No clear information hierarchy** - Important details get lost
- **Hard to edit** - Users have to understand the block system

## Vision: Section-Based Templates

Instead of free-form blocks, use a **structured section template** where:
1. Each section has a defined purpose and visual treatment
2. AI fills section-specific content (not free-form markdown)
3. Empty sections are gracefully hidden
4. Users can enable/disable and reorder sections
5. Consistent, beautiful rendering across all projects

---

## Implementation Status

### âœ… Phase 1: New Schema + Renderers (COMPLETE)
- [x] TypeScript interfaces for all section types - `src/types/sections.ts`
- [x] `OverviewSection.tsx` - Summary with metrics
- [x] `FeaturesSection.tsx` - Feature cards grid
- [x] `TechStackSection.tsx` - Technology badges by category
- [x] `GallerySection.tsx` - Image carousel/grid
- [x] `ArchitectureSection.tsx` - Mermaid diagram
- [x] `DemoSection.tsx` - Video embed + CTAs
- [x] `ChallengesSection.tsx` - Problem/solution cards
- [x] `LinksSection.tsx` - Resource links
- [x] `CustomSection.tsx` - Free-form blocks
- [x] `SectionRenderer.tsx` - Routes section type to component
- [x] `ProjectSections.tsx` - Container that renders enabled sections
- [x] Type guards for section content
- [x] Default section order and metadata

### âœ… Phase 2: Editor Components (COMPLETE)
- [x] `SectionEditor.tsx` - Edit individual section content
- [x] `SectionsEditorCanvas.tsx` - Full section management
- [x] `SectionTypePicker.tsx` - Add new sections

### ğŸ”„ Phase 3: Integration with Inline Editing (IN PROGRESS)
- [x] Sections render on project view page via `ProjectSections`
- [x] `DefaultProjectLayout` supports both blocks and sections
- [ ] Add inline section editing (reuse `useInlineEditable` pattern)
- [ ] Section toggle/reorder on view page for owners

### â³ Phase 4: AI Generation (PENDING)
- [ ] Create `analyze_for_template()` function in backend
- [ ] Section-specific prompts for AI generation
- [ ] Update `import_github_project` to generate sections
- [ ] Map AI output to section content structure

### â³ Phase 5: Migration (PENDING)
- [ ] Migration command for existing projects
- [ ] Regenerate sections for GitHub projects
- [ ] Deprecate raw `blocks` for new projects

---

## Section Types (All Implemented)

### 1. Hero Section (Separate from template)
**Purpose:** First impression - project identity and hook
- Title + tagline
- Author badge
- Hero visual (image/video/slideshow/quote)
- CTA buttons (GitHub, Demo, etc.)
- Tools used badges

### 2. Overview Section âœ…
**Purpose:** Quick "what is this?" - scannable summary
```typescript
interface OverviewSectionContent {
  headline: string;      // One-liner hook (bold, large text)
  description: string;   // 2-3 sentences max (markdown)
  metrics?: Metric[];    // Optional: Stars, downloads, etc.
}
```

### 3. Features Section âœ…
**Purpose:** What makes this project special - visual highlight grid
```typescript
interface FeaturesSectionContent {
  features: Feature[];   // Icon + title + description cards
}
```

### 4. Tech Stack Section âœ…
**Purpose:** Technologies used - credibility and searchability
```typescript
interface TechStackSectionContent {
  categories: TechCategory[];  // Grouped by Frontend/Backend/etc.
}
```

### 5. Gallery Section âœ…
**Purpose:** Visual proof - screenshots and demos
```typescript
interface GallerySectionContent {
  images: GalleryImage[];
  layout: 'carousel' | 'grid' | 'masonry';
}
```

### 6. Architecture Section âœ…
**Purpose:** Technical depth - how it works
```typescript
interface ArchitectureSectionContent {
  diagram: string;         // Mermaid code
  description?: string;    // Brief explanation
  title?: string;          // Custom title
}
```

### 7. Demo Section âœ…
**Purpose:** Try it out - reduce friction to engagement
```typescript
interface DemoSectionContent {
  video?: VideoEmbed;      // YouTube, Vimeo, Loom, or uploaded
  liveUrl?: string;        // Link to live demo
  ctas: DemoCTA[];
}
```

### 8. Challenges Section âœ…
**Purpose:** Storytelling - demonstrates growth and problem-solving
```typescript
interface ChallengesSectionContent {
  items: Challenge[];      // challenge + solution + outcome
}
```

### 9. Links Section âœ…
**Purpose:** Resources and references
```typescript
interface LinksSectionContent {
  links: ResourceLink[];   // label + url + icon
}
```

### 10. Custom Section âœ…
**Purpose:** Free-form blocks for anything else
```typescript
interface CustomSectionContent {
  title?: string;
  blocks: ProjectBlock[];  // Existing block types
}
```

---

## File Structure (Current)

```
frontend/src/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ sections.ts              # âœ… All section types defined
â”‚
â”œâ”€â”€ components/projects/
â”‚   â”œâ”€â”€ sections/
â”‚   â”‚   â”œâ”€â”€ SectionRenderer.tsx  # âœ… Routes to correct section
â”‚   â”‚   â”œâ”€â”€ OverviewSection.tsx  # âœ…
â”‚   â”‚   â”œâ”€â”€ FeaturesSection.tsx  # âœ…
â”‚   â”‚   â”œâ”€â”€ TechStackSection.tsx # âœ…
â”‚   â”‚   â”œâ”€â”€ GallerySection.tsx   # âœ…
â”‚   â”‚   â”œâ”€â”€ ArchitectureSection.tsx # âœ…
â”‚   â”‚   â”œâ”€â”€ DemoSection.tsx      # âœ…
â”‚   â”‚   â”œâ”€â”€ ChallengesSection.tsx # âœ…
â”‚   â”‚   â”œâ”€â”€ LinksSection.tsx     # âœ…
â”‚   â”‚   â””â”€â”€ CustomSection.tsx    # âœ…
â”‚   â”‚
â”‚   â”œâ”€â”€ editor/
â”‚   â”‚   â”œâ”€â”€ SectionEditor.tsx        # âœ… Edit single section
â”‚   â”‚   â”œâ”€â”€ SectionsEditorCanvas.tsx # âœ… Full sections editor
â”‚   â”‚   â””â”€â”€ SectionTypePicker.tsx    # âœ… Add new section
â”‚   â”‚
â”‚   â””â”€â”€ layouts/
â”‚       â””â”€â”€ DefaultProjectLayout.tsx  # âœ… Uses ProjectSections
```

---

## Integration with Reusable Components

The template system should leverage the shared component library:

### Inline Editing for Sections
Sections should support inline editing using the same patterns:

```typescript
// Example: Inline editable overview section
import { InlineEditableText } from '../shared/InlineEditable';

function OverviewSection({ content, isOwner, onUpdate }) {
  return (
    <div>
      <InlineEditableText
        value={content.headline}
        isEditable={isOwner}
        onChange={(v) => onUpdate({ ...content, headline: v })}
        className="text-3xl font-bold"
      />
      <InlineEditableText
        value={content.description}
        isEditable={isOwner}
        onChange={(v) => onUpdate({ ...content, description: v })}
        multiline
        rows={3}
      />
    </div>
  );
}
```

### Section Reordering
Use drag-and-drop similar to `EditableBlocksContainer`:

```typescript
// Sections can be reordered with @dnd-kit
import { DndContext, SortableContext } from '@dnd-kit/sortable';
```

---

## Data Flow

### View Mode (Current)
```
Project API Response
    â†’ project.content.sections (templateVersion: 2)
    â†’ ProjectSections component
    â†’ SectionRenderer for each enabled section
    â†’ Individual section components render content
```

### Edit Mode (Current)
```
ProjectEditor page
    â†’ SectionsEditorCanvas
    â†’ SectionEditor for each section
    â†’ Form-based editing
    â†’ Save to API
```

### Inline Edit Mode (Future)
```
Project View Page (owner)
    â†’ ProjectSections with isOwner=true
    â†’ Each section has inline editing
    â†’ useInlineEditable for text fields
    â†’ Save to API on blur/enter
```

---

## AI Generation Changes (Pending)

### Current Flow (Problems)
1. Parse README into markdown blocks
2. AI "transforms" blocks into "compelling copy"
3. AI suggests layout groupings
4. Result: Still looks like README â†’ inconsistent

### New Flow (Proposed)
1. Analyze repo (README, file tree, deps, tech stack)
2. AI generates **section-specific structured data**
3. Each section type has its own AI prompt and output schema
4. Result: Consistent, visually appealing sections

### Backend Implementation Needed
```python
def analyze_for_template(repo_data: dict, readme: str) -> dict:
    """Generate section-specific content for template."""
    return {
        "overview": {
            "headline": "AI-generated one-liner...",
            "description": "2-3 sentence summary...",
            "metrics": [...]
        },
        "features": [
            {"icon": "âš¡", "title": "...", "description": "..."},
            ...
        ],
        "tech_stack": {
            "categories": [
                {"name": "Backend", "technologies": [...]},
                ...
            ]
        },
        "architecture": {
            "diagram": "graph TB...",
            "description": "..."
        },
        # Only populated if README has relevant content
        "demo": {...} if has_demo else None,
        "gallery": [...] if has_screenshots else None,
    }
```

---

## Next Steps

### Immediate
1. [ ] Verify sections render correctly on project view page
2. [ ] Test section editor in ProjectEditor

### Short-term
3. [ ] Add inline editing to section components (reuse `InlineEditableText`)
4. [ ] Add section toggle/reorder for owners on view page
5. [ ] Connect sections to the shared component library pattern

### Medium-term
6. [ ] Implement AI generation for sections (backend)
7. [ ] Update GitHub import to generate sections
8. [ ] Migration for existing projects

### Long-term
9. [ ] Section analytics (which sections get engagement)
10. [ ] Section templates/presets
11. [ ] Per-section regeneration with AI

---

## Success Metrics

1. âœ… **Schema defined**: All section types have TypeScript interfaces
2. âœ… **Renderers implemented**: All section components exist
3. âœ… **Editor exists**: SectionEditor and canvas work
4. â³ **Visual Consistency**: All projects have same section structure
5. â³ **AI Quality**: Sections are accurately populated
6. â³ **Engagement**: Time on page, scroll depth improvements

---

## Open Questions (Resolved)

1. **Default Section Order**: Defined in `DEFAULT_SECTION_ORDER` constant
2. **Required Sections**: None mandatory, all have `defaultEnabled` flag
3. **Custom Section Limit**: No hard limit currently
4. **Template Presets**: Future feature - different defaults per project type
5. **Regeneration**: Future feature - per-section AI regeneration

---

## Relationship to Other Plans

This plan works together with:
- **project-detail-refactor.md**: Provides the layout architecture that sections plug into
- **Reusable component library**: Sections should use `InlineEditable`, `EditableBlocksContainer` patterns
- **Direct imports**: Section components import shared components directly (no barrel files)
