{% extends "crawler/base.html" %}

{% block title %}@{{ user.username }} - AllThrive AI{% endblock %}

{% block description %}@{{ user.username }}'s profile on AllThrive AI. AI builder showcasing projects and skills.{% endblock %}

{% block og_title %}@{{ user.username }} - AllThrive AI{% endblock %}
{% block og_description %}@{{ user.username }}'s profile on AllThrive AI. AI builder showcasing projects and skills.{% endblock %}
{% if user.avatar_url %}
{% block og_image %}{{ user.avatar_url }}{% endblock %}
{% endif %}

{% block extra_styles %}
.profile-header {
    margin-bottom: 40px;
    padding-bottom: 30px;
    border-bottom: 2px solid #e5e7eb;
}

.profile-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 20px;
}

.profile-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
    padding: 20px;
    background: #f9fafb;
    border-radius: 6px;
}

.stat-item {
    flex: 1;
    min-width: 150px;
    text-align: center;
}

.stat-value {
    display: block;
    font-size: 2em;
    font-weight: 700;
    color: #2563eb;
}

.stat-label {
    display: block;
    color: #666;
    margin-top: 5px;
}

.project-card {
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 20px;
    margin: 20px 0;
}

.project-card:hover {
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
{% endblock %}

{% block content %}
<article class="profile-header">
    {% if user.avatar_url %}
    <img src="{{ user.avatar_url }}" alt="@{{ user.username }}" class="profile-avatar">
    {% endif %}

    <h1>@{{ user.username }}</h1>

    <p style="font-size: 1.1em; margin: 20px 0;">
        AI builder on AllThrive AI
    </p>

    <div class="profile-stats">
        <div class="stat-item">
            <span class="stat-value">{{ projects_count }}</span>
            <span class="stat-label">Projects</span>
        </div>
    </div>
</article>

{% if projects %}
<section>
    <h2>Projects ({{ projects_count }})</h2>

    {% for project in projects %}
    <article class="project-card">
        <h3>
            <a href="/@{{ user.username }}/{{ project.slug }}">{{ project.title }}</a>
        </h3>

        {% if project.description %}
        <p>{{ project.description }}</p>
        {% endif %}

        <p class="meta-info">
            {% if project.type %}
            {{ project.get_type_display }}
            {% endif %}
            {% if project.published_at %}
            • Published {{ project.published_at|date:"F j, Y" }}
            {% endif %}
        </p>

        {% if project.tools.all %}
        <p class="meta-info">
            <strong>Built with:</strong>
            {% for tool in project.tools.all %}
                <a href="/tools/{{ tool.slug }}">{{ tool.name }}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </p>
        {% endif %}

        {% if project.categories.all %}
        <p class="meta-info">
            <strong>Categories:</strong>
            {% for category in project.categories.all %}
                {{ category.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </p>
        {% endif %}

        <p>
            <a href="/@{{ user.username }}/{{ project.slug }}">View project →</a>
        </p>
    </article>
    {% endfor %}
</section>
{% else %}
<section>
    <h2>No Projects Yet</h2>
    <p>
        @{{ user.username }} hasn't published any projects yet.
    </p>
</section>
{% endif %}

<section style="margin-top: 40px;">
    <h2>About AllThrive AI Profiles</h2>
    <p>
        AllThrive AI profiles showcase:
    </p>
    <ul>
        <li><strong>AI Projects</strong> - Portfolio of AI work and experiments</li>
        <li><strong>Skills & Tools</strong> - Technologies and frameworks used</li>
        <li><strong>Learning Progress</strong> - Tiers, achievements, and XP</li>
        <li><strong>Community Contributions</strong> - Challenges completed, battles won</li>
    </ul>
    <p>
        <a href="/">Create your own AllThrive AI profile →</a>
    </p>
</section>

<section style="margin-top: 30px;">
    <h2>Discover More Builders</h2>
    <ul>
        <li><a href="/explore">Browse all projects</a></li>
        <li><a href="/tools">Explore AI tools</a></li>
        <li><a href="/learn">Start learning AI</a></li>
    </ul>
</section>
{% endblock %}
